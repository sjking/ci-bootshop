<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class $CONTROLLER_NAME$ extends CI_Controller 
{
	function __construct()
	{
		parent::__construct();

    	//Setup the CAS Authentication and Access Control.
        $this->load->model('User_access');
    	
    	if( !$this->User_access->allowAccessType( array('Admin') ) ){
    		$data['siteTitle'] 		= "TRACS";
			$data['title'] 			= "TRACS";
			$data['noMenu']			= true;
			echo $this->load->view('_templates/admin/header', $data, true);
			echo "<p>You (" . $_SESSION['tracs_userComputingID'] . 
				") do not have the permission to access this page.</p>";
			echo $this->load->view('_templates/admin/footer', $data, true);
			exit();
		}
	}

	public function index()
	{
		$this->load->model('$MODEL_NAME$');

		$data['siteTitle'] 		= "TRACS";
		$data['title'] 			= $data['siteTitle'] . ' - $PAGE_TITLE$';
		$data['javaScript'] 	= array(
									   );
		$data['styleSheets']    = array(
									   );

		$data['header'] = '$HEADER$';
		$data['table_rows'] = $this->$MODEL_NAME$->get_rows('$MODEL_TABLE_ID_COL$');

		$data['controller'] = strtolower('$CONTROLLER_NAME$');

		$this->load->view('_templates/admin/header', $data);
		$this->load->view('$VIEW_NAME_LINK$', $data);
		$this->load->view('$TABLE_VIEW_LINK$', $data);
		$this->load->view('_templates/admin/footer', $data);
	}

	public function view($id)
	{
		$this->load->model('$DETAIL_MODEL_NAME$');

		$data['siteTitle'] 		= "TRACS";
		$data['title'] 			= $data['siteTitle'] . ' - $PAGE_TITLE$';
		$data['javaScript'] 	= array(
									   );
		$data['styleSheets']    = array(
									   );
		
		// $data['header'] = '$DETAIL_HEADER$' ;
		$data['$DETAIL_ROW$'] = $this->$DETAIL_MODEL_NAME$->get($id);
		$data['header'] = $data['$DETAIL_ROW$']['$DETAIL_HEADER$'];
		$data['detail_id'] = $id;
		$data['controller'] = strtolower('$CONTROLLER_NAME$');

		$this->load->view('_templates/admin/header', $data);
		$this->load->view('$DETAIL_VIEW_HEADER_LINK$', $data);
		$this->load->view('$DETAIL_VIEW_LINK$', $data);
		$this->load->view('_templates/admin/footer', $data);
	}
}
